<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
  
<mapper namespace="bro.pp.mapper.BoardMapper">
  	
	<insert id="boardWrite">
		INSERT into portfolio_board(bod_TITLE, bod_CONTENT) 
		VALUES(#{bod_TITLE}, #{bod_CONTENT});
	</insert>

	<select id="boardList" resultType="bro.pp.model.BoardVO">
		SELECT bod_NO, bod_TITLE, bod_ID, bod_REGDATE, bod_CNT, bod_REPLY 
		FROM portfolio_board;
	</select>
	<select id="boardDetail" resultType="bro.pp.model.BoardVO">
		SELECT * 
		FROM portfolio_board
		WHERE bod_NO=#{bod_NO};
	</select>
	

























<!-- 
 		SELECT *
		FROM(
			SELECT @rownum:=@rownum+1 rownum, b.*
			FROM portfolio_board b, (select @rownum:=0) as tmp
				<if test="keyword != null">
					<choose>
						<when test="type=='T'.toString()">
							 where title like concat('%',#{keyword},'%')
						</when>
						<when test="type=='C'.toString()">
							where content like concat('%',#{keyword},'%')
						</when>
						<otherwise>
							where title like concat('%',#{keyword},'%')
					      	OR content like concat('%',#{keyword},'%')
						</otherwise>
					</choose>
			    </if>
			    order by bod_NO desc
			) as boardlist
		<![CDATA[where rownum > (#{pageNum}-1)*#{amount} and rownum <= #{pageNum}*#{amount}]]>		
	</select> --> 
</mapper>